# Production Environment Configuration
# Use with Kubernetes secrets or secure environment variable injection

# ============================================
# Database Configuration
# ============================================

# Neo4j (use internal K8s service name)
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=${NEO4J_PASSWORD}  # Set via K8s secret

# Redis Cache
REDIS_URL=redis://redis:6379
REDIS_TTL=3600  # 1 hour for production

# ============================================
# API Keys (Set via K8s secrets)
# ============================================

GEMINI_API_KEY=${GEMINI_API_KEY}
GEMINI_MODEL=gemini-1.5-pro  # Use Pro for production

S2_API_KEY=${S2_API_KEY}
GROQ_API_KEY=${GROQ_API_KEY}

# ============================================
# LLM Configuration
# ============================================

LLM_PROVIDER=gemini

# ============================================
# Application Settings
# ============================================

ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=false

# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4  # Adjust based on CPU cores

# CORS (restrict to actual domain)
CORS_ORIGINS=["https://arxiv-cosci.example.com"]

# ============================================
# Batch Processing (Production tuned)
# ============================================

BATCH_SIZE=100
MAX_CONCURRENT=10
CHECKPOINT_DIR=/data/checkpoints
RETRY_ATTEMPTS=3

# ============================================
# Data Paths (use persistent volumes)
# ============================================

DATA_DIR=/data
RAW_DATA_DIR=/data/raw
PROCESSED_DATA_DIR=/data/processed
MODELS_DIR=/data/models
CHROMA_DIR=/app/data/chroma  # In API pod

# ============================================
# Feature Flags
# ============================================

ENABLE_CACHING=true
ENABLE_METRICS=true
ENABLE_TRACING=true

# ============================================
# Monitoring & Observability
# ============================================

# Prometheus metrics
METRICS_PORT=9090
METRICS_PATH=/metrics

# Sentry (error tracking)
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=${OTEL_ENDPOINT}
OTEL_SERVICE_NAME=arxiv-cosci-api

# ============================================
# Performance Tuning
# ============================================

# Connection pools
NEO4J_MAX_POOL_SIZE=50
REDIS_MAX_CONNECTIONS=50

# Timeouts (in seconds)
REQUEST_TIMEOUT=30
NEO4J_QUERY_TIMEOUT=60
REDIS_TIMEOUT=5

# Rate limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# ============================================
# Security
# ============================================

# JWT for API authentication
JWT_SECRET=${JWT_SECRET}
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600

# API keys rotation
API_KEY_ROTATION_DAYS=90

# SSL/TLS
SSL_VERIFY=true