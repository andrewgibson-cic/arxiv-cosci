# Staging Environment Configuration
# Mirror of production but with relaxed settings for testing

# ============================================
# Database Configuration
# ============================================

# Neo4j
NEO4J_URI=bolt://neo4j-staging:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=${NEO4J_PASSWORD}

# Redis Cache
REDIS_URL=redis://redis-staging:6379
REDIS_TTL=1800  # 30 minutes for staging

# ============================================
# API Keys
# ============================================

GEMINI_API_KEY=${GEMINI_API_KEY}
GEMINI_MODEL=gemini-1.5-flash  # Use Flash for cost savings

S2_API_KEY=${S2_API_KEY}
GROQ_API_KEY=${GROQ_API_KEY}

# ============================================
# LLM Configuration
# ============================================

LLM_PROVIDER=gemini

# ============================================
# Application Settings
# ============================================

ENVIRONMENT=staging
LOG_LEVEL=DEBUG  # More verbose for testing
DEBUG=true

# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2

# CORS (allow staging domains)
CORS_ORIGINS=["https://staging.arxiv-cosci.example.com","http://localhost:3000"]

# ============================================
# Batch Processing
# ============================================

BATCH_SIZE=50
MAX_CONCURRENT=5
CHECKPOINT_DIR=/data/checkpoints
RETRY_ATTEMPTS=2

# ============================================
# Data Paths
# ============================================

DATA_DIR=/data
RAW_DATA_DIR=/data/raw
PROCESSED_DATA_DIR=/data/processed
MODELS_DIR=/data/models
CHROMA_DIR=/app/data/chroma

# ============================================
# Feature Flags (test new features here)
# ============================================

ENABLE_CACHING=true
ENABLE_METRICS=true
ENABLE_TRACING=true

# ============================================
# Monitoring & Observability
# ============================================

METRICS_PORT=9090
METRICS_PATH=/metrics

SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging

OTEL_EXPORTER_OTLP_ENDPOINT=${OTEL_ENDPOINT}
OTEL_SERVICE_NAME=arxiv-cosci-api-staging

# ============================================
# Performance Tuning (relaxed for staging)
# ============================================

NEO4J_MAX_POOL_SIZE=20
REDIS_MAX_CONNECTIONS=20

REQUEST_TIMEOUT=60  # Longer for debugging
NEO4J_QUERY_TIMEOUT=120
REDIS_TIMEOUT=10

RATE_LIMIT_PER_MINUTE=200  # More lenient for testing
RATE_LIMIT_PER_HOUR=5000

# ============================================
# Security (relaxed for testing)
# ============================================

JWT_SECRET=${JWT_SECRET}
JWT_ALGORITHM=HS256
JWT_EXPIRATION=7200  # 2 hours for testing

SSL_VERIFY=true